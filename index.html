<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DSSSB Cipher</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }
        .header p {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        .form-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        .form-title {
            color: #2c3e50;
            font-size: 1.8rem;
            margin-bottom: 20px;
            font-weight: 600;
        }
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-group.full-width {
            grid-column: 1 / -1;
        }
        .form-group label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        .form-group input, .form-group select, .form-group textarea {
            padding: 12px 15px;
            border: 2px solid #e0e6ed;
            border-radius: 10px;
            font-size: 1rem;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            background-color: #fff;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(52, 152, 219, 0.4);
        }
        .btn-danger {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
            margin-left: 10px;
        }
        .btn-danger:hover {
             box-shadow: 0 8px 25px rgba(231, 76, 60, 0.4);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #27ae60, #229954);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.3);
            margin-left: 10px;
        }
        .btn-secondary:hover {
            box-shadow: 0 8px 25px rgba(39, 174, 96, 0.4);
        }
         .btn-tertiary {
            background: linear-gradient(135deg, #f39c12, #e67e22);
            box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);
            margin-left: 10px;
        }
        .btn-tertiary:hover {
            box-shadow: 0 8px 25px rgba(243, 156, 18, 0.4);
        }
        .table-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        .table-header {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .table-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        .table-wrapper {
            overflow-x: auto;
            max-height: 600px;
            overflow-y: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e8f4f8;
            white-space: nowrap;
        }
        th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        tr:hover {
            background: rgba(52, 152, 219, 0.05);
        }
        .delete-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background 0.3s ease;
        }
        .delete-btn:hover {
            background: #c0392b;
        }
        .filter-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            padding: 20px;
        }
        .filter-container select, .filter-container input {
            padding: 10px;
            border: 2px solid #e0e6ed;
            border-radius: 8px;
            width: 100%;
            background-color: #fff;
        }
        .review-panel {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(15px);
            border-top: 2px solid #e0e6ed;
            padding: 20px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.15);
            transform: translateY(100%);
            transition: transform 0.4s ease-in-out;
            z-index: 1000;
        }
        .review-panel.visible {
            transform: translateY(0);
        }
        .flashcard {
            background: #f8f9fa;
            border: 1px solid #e0e6ed;
            border-radius: 15px;
            padding: 25px;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: left;
            font-size: 1.2rem;
            margin-bottom: 20px;
            white-space: pre-wrap;
        }
        .flashcard-question-text {
            font-weight: 600;
            margin-bottom: 15px;
        }
        .flashcard-options {
            list-style: none;
            padding-left: 0;
        }
        .flashcard-options li {
            margin-bottom: 8px;
        }
        .flashcard-answer {
            border-top: 1px dashed #bdc3c7;
            margin-top: 15px;
            padding-top: 15px;
            color: #27ae60;
            font-weight: 600;
        }
        .review-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        .progress-bar-container {
            margin-bottom: 15px;
        }
        .progress-bar {
            height: 10px;
            background: #e0e6ed;
            border-radius: 5px;
            overflow: hidden;
        }
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            transition: width 0.3s ease;
        }
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }
        .modal-box {
            background: white;
            padding: 30px;
            border-radius: 20px;
            max-width: 800px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e0e6ed;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #2c3e50;
        }
        .modal-close-btn {
            font-size: 2rem;
            font-weight: bold;
            color: #7f8c8d;
            cursor: pointer;
            border: none;
            background: none;
        }
        .modal-body {
            white-space: pre-wrap;
            line-height: 1.8;
        }
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .header h1 { font-size: 1.8rem; }
            .form-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>DSSSB Cipher</h1>
            <p>Log and analyze each question to identify strengths and weaknesses.</p>
        </div>

        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-value" id="totalQuestions">0</div>
                <div class="stat-label">Total Questions Logged</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="sectionAQuestions">0</div>
                <div class="stat-label">Section A Questions</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="sectionBQuestions">0</div>
                <div class="stat-label">Section B Questions</div>
            </div>
             <div class="stat-card">
                <div class="stat-value" id="filteredQuestions">0</div>
                <div class="stat-label">Filtered Questions</div>
            </div>
        </div>

        <div class="form-container">
            <h2 class="form-title">Add Single Question</h2>
            <div class="form-grid">
                 <div class="form-group">
                    <label for="paperNumber">Paper Number</label>
                    <input type="number" id="paperNumber" min="1" max="12" required>
                </div>
                <div class="form-group">
                    <label for="questionNumber">Question Number</label>
                    <input type="number" id="questionNumber" min="1" max="200" required>
                </div>
                <div class="form-group">
                    <label for="section">Section</label>
                    <select id="section" required>
                        <option value="">Select Section</option>
                        <option value="Section A">Section A (General)</option>
                        <option value="Section B">Section B (Subject Specific)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="subject">Subject</label>
                    <select id="subject" required disabled>
                        <option value="">Select Subject</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="topic">Topic</label>
                    <select id="topic" required disabled>
                        <option value="">Select Topic</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="subtopic">Subtopic</label>
                    <select id="subtopic" required disabled>
                        <option value="">Select Subtopic</option>
                    </select>
                </div>
                 <div class="form-group full-width">
                    <label for="questionText">Question Text</label>
                    <textarea id="questionText" rows="3" placeholder="Enter the full question text here..."></textarea>
                </div>
                <div class="form-group">
                    <label for="optionA">Option A</label>
                    <input type="text" id="optionA" placeholder="Text for option A">
                </div>
                <div class="form-group">
                    <label for="optionB">Option B</label>
                    <input type="text" id="optionB" placeholder="Text for option B">
                </div>
                <div class="form-group">
                    <label for="optionC">Option C</label>
                    <input type="text" id="optionC" placeholder="Text for option C">
                </div>
                <div class="form-group">
                    <label for="optionD">Option D</label>
                    <input type="text" id="optionD" placeholder="Text for option D">
                </div>
                 <div class="form-group full-width">
                    <label for="correctAnswer">Correct Answer Text</label>
                    <textarea id="correctAnswer" rows="2" placeholder="Enter the full text of the correct answer..."></textarea>
                </div>
            </div>
            <button class="btn" onclick="addQuestion()">Add Question</button>
        </div>
        
        <div class="form-container">
            <h2 class="form-title">Batch Import Questions</h2>
            <div class="form-group">
                <label for="batchData">Paste Gem Output Here</label>
                <textarea id="batchData" rows="10" placeholder="Paste the JSON array from the Gem here..."></textarea>
            </div>
            <button class="btn" onclick="batchImport()">Import Batch</button>
        </div>

        <div class="table-container">
            <div class="table-header">
                <h2>Question Log</h2>
                 <div>
                    <button class="btn btn-danger" onclick="deleteSelected()">Delete Selected</button>
                    <button class="btn btn-danger" onclick="deleteAll()">Delete All</button>
                    <input type="file" id="csvFileInput" class="hidden" accept=".csv">
                    <button class="btn btn-tertiary" onclick="document.getElementById('csvFileInput').click()">Import CSV</button>
                    <button class="btn btn-secondary" onclick="exportData()">Export to CSV</button>
                </div>
            </div>
            <div class="filter-container">
                <select id="filterPaper" onchange="filterData()">
                    <option value="">All Papers</option>
                </select>
                <select id="filterSection" onchange="updateFilterSubjectOptions()">
                    <option value="">All Sections</option>
                    <option value="Section A">Section A</option>
                    <option value="Section B">Section B</option>
                </select>
                <select id="filterSubject" onchange="updateFilterTopicOptions()" disabled>
                    <option value="">All Subjects</option>
                </select>
                <select id="filterTopic" onchange="updateFilterSubtopicOptions()" disabled>
                    <option value="">All Topics</option>
                </select>
                <select id="filterSubtopic" onchange="filterData()" disabled>
                    <option value="">All Subtopics</option>
                </select>
                 <input type="text" id="searchQNum" placeholder="Search by Q#" onkeyup="filterData()">
                 <button class="btn" onclick="startReview()">Start Review of Filtered Questions</button>
            </div>
            <div class="table-wrapper">
                <table id="dataTable">
                    <thead>
                        <tr>
                            <th><input type="checkbox" onchange="toggleSelectAll(this.checked)"></th>
                            <th>Paper#</th>
                            <th>Q#</th>
                            <th>Section</th>
                            <th>Subject</th>
                            <th>Topic</th>
                            <th>Subtopic</th>
                            <th>Details</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <div class="review-panel" id="reviewPanel">
        <div class="progress-bar-container">
            <div class="progress-bar">
                <div class="progress-bar-fill" id="reviewProgressBar"></div>
            </div>
        </div>
        <div class="flashcard" id="flashcard">
            <div id="flashcardContent">
                <div class="flashcard-question-text"></div>
                <ul class="flashcard-options">
                    <li></li>
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
            </div>
            <div id="flashcardAnswer" class="flashcard-answer" style="display: none;"></div>
        </div>
        <div class="review-controls" id="reviewControls">
            <button class="btn" id="showAnswerBtn" onclick="showAnswer()">Show Answer</button>
            <div id="ratingControls" style="display: none;">
                 <button class="btn btn-danger" onclick="rateCard('Again')">Again</button>
                 <button class="btn btn-tertiary" onclick="rateCard('Hard')">Hard</button>
                 <button class="btn" onclick="rateCard('Good')">Good</button>
                 <button class="btn btn-secondary" onclick="rateCard('Easy')">Easy</button>
            </div>
        </div>
         <button class="btn" style="position: absolute; top: 20px; right: 20px;" onclick="closeReview()">Close</button>
    </div>

    <div class="modal-overlay" id="detailsModal">
        <div class="modal-box">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Question Details</h2>
                <button class="modal-close-btn" onclick="closeDetailsModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
            </div>
        </div>
    </div>

    <script>
    const syllabusStructure = {
        "Section A": {
            "General Awareness": {
                "History": ["N/A"], "Polity": ["N/A"], "Constitution": ["N/A"], "Sports": ["N/A"], "Art & Culture": ["N/A"], "Geography": ["N/A"], "Economics": ["N/A"], "Everyday Science": ["N/A"], "Scientific Research": ["N/A"], "National/ International Organizations/ Institutions": ["N/A"], "Current Events": ["N/A"]
            },
            "General Intelligence & Reasoning Ability": {
                "Analogy": ["N/A"], "Classification": ["N/A"], "Series": ["N/A"], "Coding-Decoding": ["N/A"], "Blood Relations": ["N/A"], "Direction Sense Test": ["N/A"], "Logical Venn Diagrams": ["N/A"], "Alphabet Test": ["N/A"], "Sitting Arrangements": ["N/A"], "Mathematical Operations": ["N/A"], "Arithmetical Reasoning": ["N/A"], "Inserting the missing character": ["N/A"], "Number, Ranking and Time Sequence Test": ["N/A"], "Eligibility Test": ["N/A"], "Syllogism": ["N/A"], "Statement and Arguments": ["N/A"], "Statement and Assumptions": ["N/A"], "Statement and Courses of action": ["N/A"], "Statement and Conclusions": ["N/A"], "Deriving Conclusion": ["N/A"], "Assertion and Reason": ["N/A"], "Punch Lines": ["N/A"], "Situation Reaction Tests": ["N/A"], "Cause and Effect": ["N/A"], "Analytical Reasoning": ["N/A"]
            },
            "Arithmetical & Numerical Ability": {
                "Number Systems": ["Simplification", "Decimals", "Fractions", "L.C.M.", "H.C.F."], "Data Interpretation": ["Tables & Graphs", "Pie Chart", "Line Chart", "Line Graph", "Bar Graph", "Venn Diagrams"], "Ratio & Proportion": ["N/A"], "Percentage": ["N/A"], "Average": ["N/A"], "Profit & Loss": ["N/A"], "Discount": ["N/A"], "Simple & Compound Interest": ["N/A"], "Mensuration": ["N/A"], "Time & Work": ["N/A"], "Time & Distance": ["N/A"]
            },
            "English Language & Comprehension": {
                "Parts of speech": ["N/A"], "Tenses": ["N/A"], "Articles & Determiners": ["N/A"], "Subject-Verb Agreement": ["N/A"], "Voice": ["N/A"], "Narration (Direct & Indirect Speech)": ["N/A"], "Sentence Structure": ["N/A"], "Error Detection & Correction": ["N/A"], "Transformation of Sentences": ["N/A"], "Punctuation & Capitalization": ["N/A"], "Modifiers": ["N/A"], "Antonyms": ["N/A"], "Synonyms": ["N/A"], "One-word substitutions": ["N/A"], "Idioms & Phrases": ["N/A"], "Homonyms, Homophones": ["N/A"], "Spelling rules & common errors": ["N/A"], "Word formation (prefix, suffix, root words)": ["N/A"], "Unseen passage": ["N/A"]
            },
            "Hindi Language & Comprehension": {
                "स्वर और व्यंजन": ["N/A"], "संधि (स्वर संधि, व्यंजन संधि, विसर्ग संधि)": ["N/A"], "संधि विच्छेद": ["N/A"], "तत्सम, तद्भव, देशज, विदेशी शब्द": ["N/A"], "पर्यायवाची (Synonyms)": ["N/A"], "विलोम (Antonyms)": ["N/A"], "समश्रुत भिन्नार्थक शब्द (Homonyms)": ["N/A"], "अनेकार्थक शब्द": ["N/A"], "वाक्यांश के लिए एक शब्द (One-word substitution)": ["N/A"], "समास (Compounds)": ["N/A"], "अलंकार": ["N/A"], "रस": ["N/A"], "छंद": ["N/A"], "वाक्य रचना (Sentence Structure)": ["N/A"], "वाक्य भेद (सरल, संयुक्त, मिश्र)": ["N/A"], "वाक्य शुद्धि (Error detection & correction)": ["N/A"], "अशुद्ध वाक्य शुद्ध करना": ["N/A"], "काल और वाच्य": ["N/A"], "लोकोक्तियाँ और मुहावरे": ["N/A"], "अपठित गद्यांश/काव्यांश": ["N/A"], "समझ आधारित प्रश्न (Comprehension)": ["N/A"], "पद-परिचय": ["N/A"], "संधि": ["N/A"], "शब्द शुद्धि और वर्तनी नियम": ["N/A"], "प्रत्यय और उपसर्ग": ["N/A"], "व्याकरण के अंश": ["संज्ञा (लिंग, वचन, कारक)", "सर्वनाम", "विशेषण (विभक्ति, वाचक विशेषण)", "क्रिया (सकर्मक, अकर्मक, सहायक क्रिया, भाववाचक)", "क्रियाविशेषण", "अव्यय", "समुच्चयबोधक, संबंधबोधक, विस्मयादिबोधक"]
            }
        },
        "Section B": {
            "Physics": {
                "EFFECT OF CURRENT": ["Potential; potential difference ohms law", "series combination of resistors, parallel relation combination of resistors", "Power dissipation due to current", "Inter relation between P,V,I and R", "Magnetic field & magnetic lines", "Magnetic field due to current carrying conductor", "Fleming left hand rule, Electromagnetic Induction", "Induced Potential Difference, Induced current", "Direct current, Alternating current", "Frequency of AC, Advantage of Electronic Motor & Electronic Generator"],
                "LIGHT": ["Convergence and Divergence of light", "Images. formed by a Concave Mirror", "related concepts, centre of curvature", "principles axis, optic centre, focus, focal length", "Refraction & laws of refraction", "Images formed by a convex lens", "functioning of vision and remedies", "Applications of spherical mirrors and lenses", "Appreciation of concept of refraction index", "Twinkling of stars", "Dispersion of light", "Scattering of light"],
                "The Human eye and the colourful world": ["Structure of eye", "Defects of eye and their correction"],
                "SOURCES OF ENERGY": ["Different forms of Energy", "Leading to different sources for human use: Fossil Fuels, solar energy", "Biogas", "Wind", "Water and Tidal Energy", "Nuclear Energy", "Renewable versus non-renewable sources"],
                "MOTION: FORCE AND NEWTON'S LAWS": ["Displacement, Velocity, uniform & non-uniform motion", "acceleration distance-time and velocity", "Time graphs for uniform and uniformly accelerated motion", "Equations of motion by graphical method", "Elementary idea of uniform circular motion", "Force and Motion", "Newton's laws of motion Inertia of a body", "Inertia and Mass, Momentum Force and acceleration", "Elementary idea of conservation of momentum, Action and Reaction forces"],
                "GRAVITATION: WORK, ENERGY AND POWER": ["Gravitation", "Universal Law of Gravitation", "Force of gravitation of the earth gravity, acceleration due to gravity", "mass and weight", "free fall", "Work done by a force energy, power", "Kinetic and Potential energy", "law of conservation of energy"],
                "FLOATATION": ["Thrust and Pressure, Archimedes Principle, Buoyancy", "Elementary idea of relative density"],
                "SOUND": ["Nature of Sound and its Propagation in various media, Speed of Sound", "Range of hearing in Humans", "Ultra Sound, Reflection of sound", "Echo and SONAR", "Structure of the Human Ear (Auditory aspect only)"]
            },
            "Chemistry": {
                "MATTER-NATURE AND BEHAVIOUR": ["Gases, liquids, solids, plasma and Bose-Enstein condenstate", "types of intermolecular forces", "Classification of matter into mixures and pure substances", "Henry's Law", "Concentration of solutions", "Colloids-phases of colloids, Tyndall effect, Brownian movement", "Suspension", "Properties of matter", "Measurement of properties of matter-S.I. system of units", "physical and chemical changes", "Laws of chemical combination Gay Lussac's law, Avogadro law", "atomic and molecular masses, average atomic. mass, mole concept and molar masses, percentage compostion"],
                "STRUCTURE OF ATOM": ["Dalton's atomic theory, Discharge tube experiments", "J3 Thomson's model of atom, Rutherford's model, Bohr's model of atom", "electronic configuration, formation of ions", "Characterisation of elements as metals, metalloids, or nonmetals", "isotopes (their applications), isobars and isotones"],
                "PERIODIC CLASSIFICATION OF ELEMENTS": ["Mendeleev's periodic law", "Periodic properties of elements, trends in the periods and groups", "Improtance of the periodic table, position of hydrogen in the periodic table"],
                "CHEMICAL SUBSTANCES": ["Nature and behaviour Acid, Basis and Salts", "Classical definition of acids and bases, Bronsted-Lowry theory, Lewis conceipt of acid and bases", "relative.strengths of acids and bases, logarithmic or p scale-pH,pOH and pkw, ionic equilibria in a solution", "Action of indicators on acids and bases, sources of acid and bases", "SaltClassification of salts and their pH"],
                "CHEMICAL REACTIONS": ["Formulation of chemical equations, balancing chemical equations", "Types of chemical equations with examples"],
                "METALS AND NON-METALS": ["Characters of metals and non-metals including all properties and applications", "Occurrence of metals in nature: ores and minerals, enrichment of ores metallurgical operations", "Corrosion: rusting of iron - prevention of corrosion"],
                "CARBON COMPOUNDS": ["Position of carbon in the periodic table", "Concept of hybridization and shapes of molecules structural formula and molecular models", "types of reactions undergone by organic compounds, homologous series of compounds having different functional groups, isomerism, IUPAC nomenclature of organic compounds", "Hydrocarbons - their classification formation of coal and petroleum", "Industrial source, preparation and properties of alkanes", "Alcohols: Preparation and properties", "Qualitative analysis of alcohols, iodoform test, effect of alcohols on living beings", "Carboxylic acids: Preparation and properties", "Functional group analysís of carboxylic acid", "Soaps, detergents, biodegradable detergents", "Carbon fibres"],
                "MAN MADE MATERIAL": ["Ceramics, cement, porcelain, glass, carbon fibres, soaps and detergents, polymers, fibres 'and plastics"]
            },
            "Biology": {
                "Life Processes": ["What are life Processes", "Need for Nutrition", "Different modes of. Nutrition in animals", "What is Photosynthesis", "Various steps of holozoic nutrition", "Aerobic and anaerobic respiration", "Transportation in Human beings", "Transportation in Plants", "Transportation in animals", "Excretion in animals including Human beings", "Excretion in Plants"],
                "Control & Co-Ordination": ["Animals - nervous system", "Basic unit of Nervous System in animals", "Reflex action", "Human Brain", "Co-Ordination in plants", "Geotropism - Positive, Negative", "Hormones in animals", "Endocrine & Exocrine glands"],
                "Reproduction": ["Importance of variation", "Modes of Reproduction used by single organisms", "Sexual Reproduction in plants and animals", "Reproduction in Human beings", "What happens when egg is not fertilised", "Modes of avoiding pregnancy (family planning)"],
                "Heredity and Evolution": ["What is heredity?", "Medals Law of inheritance", "How is sex determined?", "Evolution & Classification", "Acquired and inherited traits", "Homologus and Analogous organs", "What are fossils?", "Human Evolution"],
                "Natural resources": ["The fundamental unit of Life", "What are living organisms made of?", "Structure organization of cell"],
                "Tissues": ["Define tissue", "Types of plants tissue and animals tissues"],
                "Diversity of living organisms": ["Basis of Classification", "Classification & Evolution", "Hierarchy of classification - - groups", "Plantae, Animalia", "Nomenclature"],
                "Why do we fall ill": ["Health & its failure", "Diseases and their causes", "Types of diseases- Infectious, Noninfectious", "Prevention of diseases Smmunisation"],
                "OUR ENVIRONMENT": ["Atmosphere, roll of atmosphere in climate control, wind, rain", "environmental pollution: Global warming and green house effect, acid rain, particulate pollutants, smog, formation of photochemical smog", "Formation of ozone and its break down ozone hole, causes of ozone hole formation, polar vortex, effects of depletion of ozone hole", "Water pollution-oxygen demand, chemical oxygen demand, internationalstandard of drinking water, processing of drinking water", "Soil pollution: water recycling, strategies to control environmental pollution, itscollection and proper methods of disposal", "Biogeochemical cycles: water cycle, nitrogen cycle, carbon cycle and oxygencycle"],
                "CONSERVATION OF NATURAL RESOURCES": ["Pollution of river water, Ganga action plan for improving quality of water", "Need for sustainable management of natural resources", "Development of non- conventional energy resources to prevent pollution and atmospheric conservation"],
                "Improvement in Food Resources": ["Improvement in crop yield", "Animal Husbandry", "Need for intercropping", "Cross Breeding"],
                "Bone and Cartilage": ["Structure and types of bones and cartilages, Ossification, bone growth and resorption"],
                "Animal Diversity": ["Kingdom Protista, Amphibia, Reptiles, Aves, Mammals", "Phylüm Porifera, Phylum Cnidaria, Phylum Annelida, Phylum Arthròpoda, Phylum Mollusca"],
                "Comparative Anatomy and Developmental Biology of Vertebrates": ["Integumentary System, Skeletal System, Digestive System, Respiratory System, Circulatory System, Urinogenital System, Nervous system, Sense Organ", "Early Embryonoic Development, Late Embryonic Development, Control of Development"],
                "Physiology and Biochemistry": ["Nerve and Muscle, Digestion, Respiration, Excretion, Cardiovascular System, Reproduction and Endocrine Glands", "Carbohydrate Metabolism, Lipid Metabolism, Protein Metabolism, Enzymes, Extinction, Macro-evolution"],
                "Applied Zoology": ["Introduction to Host-parasite Relationship", "Epidemiology of Diseases,Rickettsiaeand Spirochaetes", "Parasitic Protozoa", "Parasitic Helminthes", "Insects of Eco Importance,Insects of Medical Importance", "Animal Husbandry, Poultry Farming, Fish Technology"],
                "Aquatic Biology": ["Aquatic Biomes", "Freshwater Biology", "Marine Biology", "Management of Aquatic Resources"],
                "Immunology": ["Overview of the Immune System", "Cells and Organs of the Immune System", "Antigens", "Antibodies", "Working of the immune system", "Immune system in health and disease", "Vaccines"],
                "Reproductive Biology": ["Reproductive Endocrinology", "Functional anatomy of male reproduction", "Functional anatomy of female reproduction", "Reproductive Health"],
                "Insect, Vectors and Diseases": ["Introduction of Insects", "Concept of Vectors", "Insects as Vectors", "Dipteran as Disease Vectors", "Siphonaptera as disease vectors", "Hempitera as Disease Vectors"],
                "Sericulture": ["Introduction", "Biology of Silkworm", "Rearing of Silkworms", "Pests and Diseases"]
            }
        }
    };

    let questionsData = [];
    let reviewSession = {
        isActive: false,
        questions: [],
        currentIndex: 0
    };

    // Form Dropdown Elements
    const sectionSelect = document.getElementById('section');
    const subjectSelect = document.getElementById('subject');
    const topicSelect = document.getElementById('topic');
    const subtopicSelect = document.getElementById('subtopic');

    // Filter Dropdown Elements
    const filterPaperSelect = document.getElementById('filterPaper');
    const filterSectionSelect = document.getElementById('filterSection');
    const filterSubjectSelect = document.getElementById('filterSubject');
    const filterTopicSelect = document.getElementById('filterTopic');
    const filterSubtopicSelect = document.getElementById('filterSubtopic');

    function populateDropdown(selectElement, items, prompt) {
        const currentValue = selectElement.value;
        selectElement.innerHTML = `<option value="">${prompt}</option>`;
        items.forEach(item => {
            const option = document.createElement('option');
            option.value = item;
            option.textContent = item;
            selectElement.appendChild(option);
        });
        selectElement.value = currentValue;
        selectElement.disabled = false;
    }

    // Form Dropdown Logic
    sectionSelect.addEventListener('change', function() {
        subjectSelect.innerHTML = '<option value="">Select Subject</option>';
        topicSelect.innerHTML = '<option value="">Select Topic</option>';
        subtopicSelect.innerHTML = '<option value="">Select Subtopic</option>';
        subjectSelect.disabled = true;
        topicSelect.disabled = true;
        subtopicSelect.disabled = true;
        if (this.value) {
            const subjects = Object.keys(syllabusStructure[this.value]);
            populateDropdown(subjectSelect, subjects, 'Select Subject');
        }
    });

    subjectSelect.addEventListener('change', function() {
        topicSelect.innerHTML = '<option value="">Select Topic</option>';
        subtopicSelect.innerHTML = '<option value="">Select Subtopic</option>';
        topicSelect.disabled = true;
        subtopicSelect.disabled = true;
        const section = sectionSelect.value;
        if (section && this.value) {
            const topics = Object.keys(syllabusStructure[section][this.value]);
            populateDropdown(topicSelect, topics, 'Select Topic');
        }
    });

    topicSelect.addEventListener('change', function() {
        subtopicSelect.innerHTML = '<option value="">Select Subtopic</option>';
        subtopicSelect.disabled = true;
        const section = sectionSelect.value;
        const subject = subjectSelect.value;
        if (section && subject && this.value) {
            const subtopics = syllabusStructure[section][subject][this.value];
            populateDropdown(subtopicSelect, subtopics, 'Select Subtopic');
        }
    });
    
    // Filter Dropdown Logic
    function updateFilterSubjectOptions() {
        filterSubjectSelect.innerHTML = '<option value="">All Subjects</option>';
        filterTopicSelect.innerHTML = '<option value="">All Topics</option>';
        filterSubtopicSelect.innerHTML = '<option value="">All Subtopics</option>';
        filterSubjectSelect.disabled = true;
        filterTopicSelect.disabled = true;
        filterSubtopicSelect.disabled = true;
        
        const section = filterSectionSelect.value;
        if (section) {
            const subjects = Object.keys(syllabusStructure[section]);
            populateDropdown(filterSubjectSelect, subjects, 'All Subjects');
        }
        filterData();
    }
    
    function updateFilterTopicOptions() {
        filterTopicSelect.innerHTML = '<option value="">All Topics</option>';
        filterSubtopicSelect.innerHTML = '<option value="">All Subtopics</option>';
        filterTopicSelect.disabled = true;
        filterSubtopicSelect.disabled = true;

        const section = filterSectionSelect.value;
        const subject = filterSubjectSelect.value;
        if (section && subject) {
            const topics = Object.keys(syllabusStructure[section][subject]);
            populateDropdown(filterTopicSelect, topics, 'All Topics');
        }
        filterData();
    }

    function updateFilterSubtopicOptions() {
        filterSubtopicSelect.innerHTML = '<option value="">All Subtopics</option>';
        filterSubtopicSelect.disabled = true;

        const section = filterSectionSelect.value;
        const subject = filterSubjectSelect.value;
        const topic = filterTopicSelect.value;
        if (section && subject && topic) {
            const subtopics = syllabusStructure[section][subject][topic];
            populateDropdown(filterSubtopicSelect, subtopics, 'All Subtopics');
        }
        filterData();
    }

    function addQuestion() {
        const formData = {
            paperNumber: document.getElementById('paperNumber').value,
            questionNumber: document.getElementById('questionNumber').value,
            section: sectionSelect.value,
            subject: subjectSelect.value,
            topic: topicSelect.value,
            subtopic: subtopicSelect.value,
            questionText: document.getElementById('questionText').value,
            options: {
                a: document.getElementById('optionA').value,
                b: document.getElementById('optionB').value,
                c: document.getElementById('optionC').value,
                d: document.getElementById('optionD').value,
            },
            correctAnswer: document.getElementById('correctAnswer').value,
            reviewStatus: 'new',
            easeFactor: 2.5,
            interval: 0,
            nextReviewDate: new Date().toISOString()
        };

        const requiredFields = ['paperNumber', 'questionNumber', 'section', 'subject', 'topic', 'subtopic', 'questionText', 'correctAnswer'];
        for (let field of requiredFields) {
            if (!formData[field]) {
                alert(`Please fill in the '${field}' field.`);
                return;
            }
        }

        const uniqueId = `${formData.paperNumber}-${formData.questionNumber}`;
        if (questionsData.some(q => `${q.paperNumber}-${q.questionNumber}` === uniqueId)) {
            if (!confirm(`Question ${formData.questionNumber} from Paper ${formData.paperNumber} already exists. Do you want to overwrite it?`)) {
                return;
            }
            questionsData = questionsData.filter(q => `${q.paperNumber}-${q.questionNumber}` !== uniqueId);
        }

        questionsData.push(formData);
        questionsData.sort((a, b) => (a.paperNumber - b.paperNumber) || (a.questionNumber - b.questionNumber));
        saveData();
        renderTable();
        updateStats();
        updateAllFilterOptions();
        clearForm();
    }
    
    function clearForm() {
        document.getElementById('paperNumber').value = '';
        document.getElementById('questionNumber').value = '';
        sectionSelect.value = '';
        subjectSelect.innerHTML = '<option value="">Select Subject</option>';
        topicSelect.innerHTML = '<option value="">Select Topic</option>';
        subtopicSelect.innerHTML = '<option value="">Select Subtopic</option>';
        subjectSelect.disabled = true;
        topicSelect.disabled = true;
        subtopicSelect.disabled = true;
        document.getElementById('questionText').value = '';
        document.getElementById('optionA').value = '';
        document.getElementById('optionB').value = '';
        document.getElementById('optionC').value = '';
        document.getElementById('optionD').value = '';
        document.getElementById('correctAnswer').value = '';
    }

    function renderTable() {
        const tbody = document.getElementById('tableBody');
        tbody.innerHTML = '';
        const filtered = getFilteredData();

        document.getElementById('filteredQuestions').textContent = filtered.length;

        filtered.forEach((question) => {
            const row = document.createElement('tr');
            const uniqueId = `${question.paperNumber}-${question.questionNumber}`;
            row.innerHTML = `
                <td><input type="checkbox" class="row-selector" data-id="${uniqueId}"></td>
                <td>${question.paperNumber}</td>
                <td>${question.questionNumber}</td>
                <td>${question.section}</td>
                <td>${question.subject}</td>
                <td>${question.topic}</td>
                <td>${question.subtopic}</td>
                <td><button class="btn" style="padding: 5px 10px;" onclick="showDetailsModal('${uniqueId}')">View</button></td>
                <td><button class="delete-btn" onclick="deleteQuestion('${uniqueId}')">Delete</button></td>
            `;
            tbody.appendChild(row);
        });
    }

    function updateStats() {
        const total = questionsData.length;
        const sectionA = questionsData.filter(q => q.section === 'Section A').length;
        const sectionB = questionsData.filter(q => q.section === 'Section B').length;

        document.getElementById('totalQuestions').textContent = total;
        document.getElementById('sectionAQuestions').textContent = sectionA;
        document.getElementById('sectionBQuestions').textContent = sectionB;
    }
    
    function updateAllFilterOptions() {
        const papers = [...new Set(questionsData.map(q => q.paperNumber))].sort((a,b) => a-b);
        populateDropdown(filterPaperSelect, papers, 'All Papers');
    }

    function getFilteredData() {
        const paperFilter = filterPaperSelect.value;
        const sectionFilter = filterSectionSelect.value;
        const subjectFilter = filterSubjectSelect.value;
        const topicFilter = filterTopicSelect.value;
        const subtopicFilter = filterSubtopicSelect.value;
        const searchFilter = document.getElementById('searchQNum').value;

        return questionsData.filter(q => {
            const paperMatch = !paperFilter || q.paperNumber === paperFilter;
            const sectionMatch = !sectionFilter || q.section === sectionFilter;
            const subjectMatch = !subjectFilter || q.subject === subjectFilter;
            const topicMatch = !topicFilter || q.topic === topicFilter;
            const subtopicMatch = !subtopicFilter || q.subtopic === subtopicFilter;
            const searchMatch = !searchFilter || q.questionNumber.toString().includes(searchFilter);
            return paperMatch && sectionMatch && subjectMatch && topicMatch && subtopicMatch && searchMatch;
        });
    }

    function filterData() {
        renderTable();
    }

    function deleteQuestion(uniqueId) {
        if (confirm(`Are you sure you want to delete this question entry?`)) {
            questionsData = questionsData.filter(q => `${q.paperNumber}-${q.questionNumber}` !== uniqueId);
            saveData();
            renderTable();
            updateStats();
            updateAllFilterOptions();
        }
    }
    
    function toggleSelectAll(checked) {
        document.querySelectorAll('.row-selector').forEach(checkbox => checkbox.checked = checked);
    }

    function deleteSelected() {
        const selectedIds = [...document.querySelectorAll('.row-selector:checked')].map(cb => cb.dataset.id);
        if (selectedIds.length === 0) {
            alert('Please select questions to delete.');
            return;
        }
        if (confirm(`Are you sure you want to delete ${selectedIds.length} selected questions?`)) {
            questionsData = questionsData.filter(q => !selectedIds.includes(`${q.paperNumber}-${q.questionNumber}`));
            saveData();
            renderTable();
            updateStats();
            updateAllFilterOptions();
        }
    }

    function deleteAll() {
        if (confirm('ARE YOU SURE you want to delete ALL questions? This action cannot be undone.')) {
            questionsData = [];
            saveData();
            renderTable();
            updateStats();
            updateAllFilterOptions();
        }
    }

    function saveData() {
        localStorage.setItem('dsssbExamAnalysisV5', JSON.stringify(questionsData));
    }

    function loadData() {
        const data = localStorage.getItem('dsssbExamAnalysisV5');
        if (data) {
            questionsData = JSON.parse(data);
        }
        renderTable();
        updateStats();
        updateAllFilterOptions();
    }

    function exportData() {
        if (questionsData.length === 0) {
            alert('No data to export!');
            return;
        }
        const headers = ['Paper Number', 'Question Number', 'Section', 'Subject', 'Topic', 'Subtopic', 'Question Text', 'Option A', 'Option B', 'Option C', 'Option D', 'Correct Answer'];
        let csvContent = "data:text/csv;charset=utf-8," + headers.join(",") + "\n";

        questionsData.forEach(q => {
            const row = [
                q.paperNumber, q.questionNumber, q.section, q.subject, q.topic, 
                `"${q.subtopic.replace(/"/g, '""')}"`, `"${q.questionText.replace(/"/g, '""')}"`,
                `"${(q.options.a || '').replace(/"/g, '""')}"`, `"${(q.options.b || '').replace(/"/g, '""')}"`, 
                `"${(q.options.c || '').replace(/"/g, '""')}"`, `"${(q.options.d || '').replace(/"/g, '""')}"`,
                `"${q.correctAnswer.replace(/"/g, '""')}"`
            ];
            csvContent += row.join(",") + "\n";
        });

        const encodedUri = encodeURI(csvContent);
        const link = document.createElement("a");
        link.setAttribute("href", encodedUri);
        link.setAttribute("download", "dsssb_exam_analysis_full.csv");
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    }
    
    function importData(event) {
        const file = event.target.files[0];
        if (!file) return;

        const reader = new FileReader();
        reader.onload = function(e) {
            try {
                const text = e.target.result;
                const rows = text.split('\n').slice(1);
                const importedQuestions = [];

                rows.forEach(rowStr => {
                    if (rowStr.trim() === '') return;
                    const columns = rowStr.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(field => field.replace(/^"|"$/g, '').replace(/""/g, '"'));
                    if (columns.length >= 12) {
                         importedQuestions.push({
                            paperNumber: columns[0],
                            questionNumber: columns[1],
                            section: columns[2],
                            subject: columns[3],
                            topic: columns[4],
                            subtopic: columns[5] || 'N/A',
                            questionText: columns[6] || '',
                            options: {
                                a: columns[7] || '',
                                b: columns[8] || '',
                                c: columns[9] || '',
                                d: columns[10] || ''
                            },
                            correctAnswer: columns[11] || '',
                            reviewStatus: 'new', easeFactor: 2.5, interval: 0, nextReviewDate: new Date().toISOString()
                        });
                    }
                });

                if (confirm(`Found ${importedQuestions.length} questions in the CSV. Do you want to overwrite existing data?`)) {
                    questionsData = importedQuestions;
                    questionsData.sort((a, b) => (a.paperNumber - b.paperNumber) || (a.questionNumber - b.questionNumber));
                    saveData();
                    renderTable();
                    updateStats();
                    updateAllFilterOptions();
                    alert('Data imported successfully!');
                }
            } catch (error) {
                alert('Failed to import CSV. Please check the file format.');
                console.error(error);
            }
        };
        reader.readAsText(file);
        event.target.value = '';
    }

    function batchImport() {
        const batchDataEl = document.getElementById('batchData');
        const text = batchDataEl.value.trim();
        if (!text) {
            alert('Please paste data from the Gem into the text area.');
            return;
        }

        try {
            const batch = JSON.parse(text);
            if (!Array.isArray(batch)) {
                throw new Error('Pasted data is not a JSON array.');
            }

            let addedCount = 0;
            let overwrittenCount = 0;
            
            batch.forEach(q => {
                const uniqueId = `${q.paperNumber}-${q.questionNumber}`;
                const existingIndex = questionsData.findIndex(item => `${item.paperNumber}-${item.questionNumber}` === uniqueId);
                const newQuestionData = { ...q, reviewStatus: 'new', easeFactor: 2.5, interval: 0, nextReviewDate: new Date().toISOString() };

                if (existingIndex !== -1) {
                    questionsData[existingIndex] = { ...questionsData[existingIndex], ...newQuestionData };
                    overwrittenCount++;
                } else {
                    questionsData.push(newQuestionData);
                    addedCount++;
                }
            });
            
            questionsData.sort((a, b) => (a.paperNumber - b.paperNumber) || (a.questionNumber - b.questionNumber));
            saveData();
            renderTable();
            updateStats();
            updateAllFilterOptions();
            batchDataEl.value = '';
            alert(`Batch import complete!\nAdded: ${addedCount} new questions.\nOverwritten: ${overwrittenCount} existing questions.`);

        } catch (error) {
            alert('Failed to parse batch data. Please ensure it is a valid JSON array copied from the Gem.');
            console.error(error);
        }
    }
    
    // Review Panel Logic
    function startReview() {
        reviewSession.questions = getFilteredData();
        if (reviewSession.questions.length === 0) {
            alert('No questions match the current filters. Please adjust filters to start a review.');
            return;
        }
        reviewSession.isActive = true;
        reviewSession.currentIndex = 0;
        document.getElementById('reviewPanel').classList.add('visible');
        loadNextCard();
    }

    function closeReview() {
        reviewSession.isActive = false;
        document.getElementById('reviewPanel').classList.remove('visible');
    }

    function loadNextCard() {
        if (reviewSession.currentIndex >= reviewSession.questions.length) {
            alert('Review session complete!');
            closeReview();
            return;
        }

        const progress = ((reviewSession.currentIndex + 1) / reviewSession.questions.length) * 100;
        document.getElementById('reviewProgressBar').style.width = `${progress}%`;

        const card = reviewSession.questions[reviewSession.currentIndex];
        const flashcardQuestionText = document.querySelector('#flashcardContent .flashcard-question-text');
        const flashcardOptions = document.querySelector('#flashcardContent .flashcard-options');
        
        flashcardQuestionText.textContent = card.questionText;
        const optionsList = flashcardOptions.getElementsByTagName('li');
        optionsList[0].textContent = `A) ${card.options.a}`;
        optionsList[1].textContent = `B) ${card.options.b}`;
        optionsList[2].textContent = `C) ${card.options.c}`;
        optionsList[3].textContent = `D) ${card.options.d}`;

        document.getElementById('flashcardAnswer').textContent = `Correct Answer: ${card.correctAnswer}`;
        document.getElementById('flashcardAnswer').style.display = 'none';
        document.getElementById('showAnswerBtn').style.display = 'block';
        document.getElementById('ratingControls').style.display = 'none';
    }

    function showAnswer() {
        document.getElementById('flashcardAnswer').style.display = 'block';
        document.getElementById('showAnswerBtn').style.display = 'none';
        document.getElementById('ratingControls').style.display = 'flex';
    }

    function rateCard(rating) {
        // Placeholder for Anki SM-2 algorithm logic. For now, it just moves to the next card.
        console.log(`Card rated as: ${rating}`);
        
        reviewSession.currentIndex++;
        loadNextCard();
    }

    // Modal Logic
    const modal = document.getElementById('detailsModal');
    function showDetailsModal(uniqueId) {
        const question = questionsData.find(q => `${q.paperNumber}-${q.questionNumber}` === uniqueId);
        if (!question) return;

        document.getElementById('modalTitle').textContent = `Details for Paper ${question.paperNumber} - Q#${question.questionNumber}`;
        const modalBody = document.getElementById('modalBody');
        modalBody.innerHTML = `
            <p><strong>Question:</strong> ${question.questionText}</p>
            <hr style="margin: 15px 0;">
            <p><strong>Options:</strong></p>
            <ul style="list-style: none; padding-left: 10px;">
                <li>A) ${question.options.a}</li>
                <li>B) ${question.options.b}</li>
                <li>C) ${question.options.c}</li>
                <li>D) ${question.options.d}</li>
            </ul>
            <hr style="margin: 15px 0;">
            <p><strong>Correct Answer:</strong> ${question.correctAnswer}</p>
        `;
        modal.style.display = 'flex';
    }

    function closeDetailsModal() {
        modal.style.display = 'none';
    }

    window.onclick = function(event) {
        if (event.target == modal) {
            closeDetailsModal();
        }
    }
    
    document.getElementById('csvFileInput').addEventListener('change', importData);
    document.addEventListener('DOMContentLoaded', loadData);

    </script>
</body>
</html>
